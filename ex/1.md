Ex. No. 1.a: Learn to setup and configure a OpenVPN server

Aim: To Setup and configure an OpenVPN server.

Requirements:
Linux/Debain (or similar distributions)
Internet Access
Sudo access (root/admin rights)

Package Dependencies:
Openvpn
Easy-rsa
Net-tools (for ipconfig/ ip)

Procedure:
Install OpenVPN and Easy-RSA:
sudo apt update
sudo apt install openvpn easy-rsa -y


Set Up Easy-RSA Directory:
make-cadir ~/openvpn-ca cd ~/openvpn-ca
Initialize the Public Key Infrastructure (PKI):
./easyrsa init-pki



Build the Certificate Authority (CA):
./easyrsa build-ca
When prompted, enter a name like: MyVPN-CA



Generate Server Certificate and Key:
./easyrsa gen-req server nopass
./easyrsa sign-req server server
Approve when it asks with: yes


Generate Diffie-Hellman and TLS Key:
./easyrsa gen-dh
openvpn --genkey secret ta.key


Copy Keys and Certs to OpenVPN Directory:
sudo cp pki/ca.crt pki/private/server.key pki/issued/server.crt pki/dh.pem ta.key /etc/openvpn/

Create Server Configuration File:
sudo nano /etc/openvpn/server.conf
Paste this config: port 1194
proto udp dev tun
ca ca.crt
cert server.crt key server.key

dh dh.pem
tls-auth ta.key 
server 10.8.0.0 255.255.255.0
ifconfig-pool-persist ipp.txt
push "redirect-gateway def1 bypass-dhcp" push "dhcp-option DNS 1.1.1.1"
push "dhcp-option DNS 8.8.8.8"
keepalive 10 120 cipher AES-256-CBC user nobody
group nogroup persist-key persist-tun
status openvpn-status.log
log-append /var/log/openvpn.log verb 3
explicit-exit-notify 1

Enable IP Forwarding:
sudo nano /etc/sysctl.conf
Add:
net.ipv4.ip_forward = 1
Apply the change:
sudo sysctl -p
Start and Enable OpenVPN Server:
sudo systemctl start openvpn@server sudo systemctl enable openvpn@server sudo systemctl status openvpn@server
Check for tun0 interface: ip a

If you see tun0 with IP 10.8.0.1, the server is up!